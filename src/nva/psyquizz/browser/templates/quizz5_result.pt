<style>
#percentage-averages {
   margin-left: 25px;
}

.bar {
    border: 1px solid black;
    display: flex;
    flex-direction: row;
    width: 700px;
}

.bar > div {
   height: 30px;
   font-weight: bold;
   font-size: 1.3em;
   padding-left: 0.5em;
   color: white;
   vertical-align: middle;
   line-height: 30px;
}

.bar .mask {
  background-color: black;
  opacity: 0.2;
}
</style>


<div>
  <div class="header">
    <h1>Ergebnisse</h1>
    <p>
      Hier sehen Sie die Auswertung für alle Beschäftigten.
    </p>
    <p>
      Durch Auswahl einer oder mehrerer Auswertungsgruppen haben Sie die
      Möglichkeit sich eine detaillierte Auswertung anzeigen zu lassen.
      (Bitte beachten Sie: Einzelne Auswertungsgruppen können erst ausgewählt
      werden, wenn für diese Auswertungsgruppe mindestens sieben ausgefüllte
      Fragebögen vorliegen.)
    </p>
    <p>
      Der weitere Umgang mit den Ergebnissen ist in der
      „Übersicht 7 Schritte“ unter 4. Lösungsworkshops beschrieben.
    </p>
  </div>
  <form action="." tal:attributes="action view.request.url"
        tal:define="current view.stats.filters.get('criterias', {})">
    <div>
      <a name="uncheckall">Alle</a>
    </div>
    <dl tal:define="crits view.stats.statistics['criterias']">
      <tal:dl tal:repeat="crit crits">
        <dt><h3 tal:content="crit" /></dt>
        <dd>
          <div tal:repeat="opt crits[crit]"
               style="display: inline-block; padding: 5px;">
            <tal:disabled define="disabled bool(opt.amount &lt; 7)">
              <input name="criterias" type="checkbox"
                     tal:attributes="value opt.uid;
                                     checked opt.uid in current;
                                     disabled disabled and 'disabled' or None" />
              <span tal:content="'%s (%s)' % (opt.name, opt.amount)"
                    tal:attributes="class disabled and 'text-muted' or ''"/>
            </tal:disabled>
          </div>
        </dd>
      </tal:dl>
    </dl>
    <input id="form-action-filter" type="submit" value="filter" />
  </form>

  <script>
    $(document).ready(function() {
        $("a[name='checkall']").click(function () {
            $("input:checkbox").prop('checked', true);
            $("#form-action-filter").click();
        });

        $("a[name='uncheckall']").click(function () {
            $("input:checkbox").prop('checked', false);
            $("#form-action-filter").click();
        });

        $('input[type=checkbox]').change(function() {
            $("#form-action-filter").click();
        });
    });
  <script>

  <div id="percentage-averages">
    <div tal:repeat="scale view.stats.statistics['global.averages']">
      <h4>${scale.title} (${scale.average})</h4>
      <div class="bar"
           style="background: linear-gradient(90deg, rgba(255,0,0,1) 0%, rgba(255,228,0,1) 50%, rgba(0,255,22,1) 100%);">
        <div style="border-right: 2px solid white;
                    width: ${scale.average * 20}%">
        </div>
        <div class="mask" style="width: ${100 - (scale.average * 20)}%" />
      </div>
    </div>
  </div>

  <div id="container" style="min-width: 310px; max-width: 800px; height: 800px; margin: 0 auto"></div>

<script>
  var myChart = Highcharts.chart('container', {
    chart: {
        inverted: true,
        marginLeft: 135,
        type: 'bullet'
    },
    title: {
        text: '2017 YTD'
    },
    xAxis: {
        categories: ['<span class="hc-cat-title">Revenue</span><br/>U.S. $ (1,000s)']
    },
    yAxis: {
        plotBands: [{
            from: 0,
            to: 150,
            color: '#666'
        }, {
            from: 150,
            to: 225,
            color: '#999'
        }, {
            from: 225,
            to: 9e9,
            color: '#bbb'
        }],
        title: null
    },
    series: [{
        data: [{
            y: 275,
            target: 250
        }]
    }],
    tooltip: {
        pointFormat: '<b>{point.y}</b> (with target at {point.target})'
    }
});
</script>





</div>
